<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Supplier Management</title>
<style type="text/css">@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:400;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:500;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:600;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/cyrillic-ext/wght/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/cyrillic/wght/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/greek/wght/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/vietnamese/wght/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Inter;font-style:normal;font-weight:700;src:url(/cf-fonts/v/inter/5.0.16/greek-ext/wght/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}</style>
<style>
:root {
    --bg-dark: #070d18;
    --bg-darker: #050a14;
    --primary: #2563eb;
    --accent: #facc15;
    --white: #ffffff;
    --glass: rgba(255, 255, 255, 0.06);
    --border: rgba(255, 255, 255, 0.12);
    --text-secondary: rgba(255, 255, 255, 0.7);
    --error: #ef4444;
    --success: #22c55e;
}

/* Light Mode Overrides */
body.light-mode {
    --bg-dark: #f8fafc;
    --bg-darker: #e2e8f0;
    --primary: #2563eb;
    --accent: #f59e0b;
    --glass: rgba(255, 255, 255, 0.8);
    --border: rgba(0, 0, 0, 0.1);
    --text-secondary: rgba(0, 0, 0, 0.6);
    background: var(--bg-dark);
    color: #0f172a;
}

body.light-mode .card {
    background: var(--glass);
    border-color: var(--border);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
}

body.light-mode input,
body.light-mode select,
body.light-mode textarea {
    background: rgba(255, 255, 255, 0.9);
    color: #0f172a;
    border-color: var(--border);
}

* { box-sizing: border-box; margin:0; padding:0; }
body { font-family:'Inter',sans-serif; background: var(--bg-dark); color: var(--white); padding-top: 90px; min-height: 100vh; }

/* Header */
header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 80px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 50px;
    background: rgba(5, 10, 20, 0.85);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    z-index: 1000;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
}

.header-left {
    display: flex;
    align-items: center;
    gap: 24px;
}

header h1 {
    font-size: 26px;
    font-weight: 700;
    margin: 0;
    color: var(--white);
}

/* Desktop Navigation */
nav.desktop-nav {
    display: flex;
    align-items: center;
    gap: 20px;
}

nav.desktop-nav a,
nav.desktop-nav button {
    padding: 10px 24px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 15px;
    text-decoration: none;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
}

nav.desktop-nav .back-btn {
    background: var(--accent);
    color: #000;
}

nav.desktop-nav .back-btn:hover {
    background: #fde047;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(250, 204, 21, 0.4);
}

nav.desktop-nav .logout-btn {
    background: transparent;
    color: var(--white);
    border: 1px solid var(--border);
}

nav.desktop-nav .logout-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--accent);
    color: var(--accent);
}

/* Cancel button - now uses same class as Save (cta) for identical look */
#cancel-customer-btn {
    background: #6b7280;
}

#cancel-customer-btn:hover {
    background: #4b5563;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(107, 114, 128, 0.4);
}

/* Hamburger Icon - Mobile Only */
.hamburger {
    display: none;
    flex-direction: column;
    justify-content: space-between;
    width: 30px;
    height: 21px;
    cursor: pointer;
    z-index: 101;
}

.hamburger span {
    display: block;
    height: 3px;
    width: 100%;
    background: var(--white);
    border-radius: 3px;
    transition: all 0.3s ease;
}

.hamburger.active span:nth-child(1) { transform: rotate(45deg) translate(6px, 6px); }
.hamburger.active span:nth-child(2) { opacity: 0; }
.hamburger.active span:nth-child(3) { transform: rotate(-45deg) translate(6px, -6px); }

/* Mobile Menu Overlay */
.mobile-nav {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: var(--bg-dark);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 32px;
    transform: translateX(100%);
    transition: transform 0.4s ease;
    z-index: 100;
    visibility: hidden;
    pointer-events: none;
    overflow: hidden;
}

.mobile-nav.active {
    transform: translateX(0);
    visibility: visible;
    pointer-events: auto;
}

.mobile-nav a,
.mobile-nav button {
    font-size: 24px;
    font-weight: 600;
    color: var(--white);
    text-decoration: none;
    background: none;
    border: none;
    padding: 12px 24px;
    width: 80%;
    text-align: center;
    border-radius: 12px;
    transition: background 0.3s ease;
    cursor: pointer;
}

.mobile-nav a:hover,
.mobile-nav button:hover {
    background: rgba(255, 255, 255, 0.1);
}

.mobile-nav-close {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 32px;
    color: var(--white);
    background: none;
    border: none;
    cursor: pointer;
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background 0.3s ease;
}

.mobile-nav-close:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Theme Toggle Switch */
.theme-toggle {
    position: relative;
    display: inline-block;
    width: 56px;
    height: 30px;
}

.theme-toggle input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #64748b;
    transition: .4s;
    border-radius: 34px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 24px;
    width: 24px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: #facc15;
}

input:checked + .slider:before {
    transform: translateX(26px);
}

.slider:after {
    content: 'üåô';
    color: white;
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 16px;
    transition: .4s;
}

input:checked + .slider:after {
    content: '‚òÄÔ∏è';
    left: 8px;
    right: auto;
}

.main { max-width: 1200px; margin: 50px auto; padding:20px; display:flex; flex-direction:column; gap:40px; }
.card { background: var(--glass); padding:30px; border-radius:20px; border:1px solid var(--border); backdrop-filter: blur(12px); }
.card h2 { margin-bottom:20px; color: var(--accent); }

.peppol-search { margin-bottom: 20px; }
.peppol-search input { width: 350px; padding: 12px; border-radius: 12px; border: 1px solid var(--border); background: rgba(255, 255, 255, 0.08); color: white; }
.peppol-results { margin-top: 20px; max-height: 400px; overflow-y: auto; position: relative; }
.peppol-result { background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; margin-bottom: 16px; }
.peppol-result strong { font-size: 18px; }
.peppol-result p { margin: 8px 0; color: var(--text-secondary); }

/* Close button for PEPPOL results */
#peppol-close-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: var(--white);
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

#peppol-close-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Desktop Table */
.desktop-table-wrapper { overflow-x: auto; }
.table { width: 100%; border-collapse: collapse; }
.table th, .table td { padding: 12px; border-bottom: 1px solid var(--border); text-align: left; }
.table th { background: rgba(255,255,255,0.05); }

/* Mobile Customer List */
.mobile-customer-list { display: none; flex-direction: column; gap: 16px; }
.customer-card { background: rgba(255,255,255,0.06); border: 1px solid var(--border); border-radius: 16px; padding: 20px; }
.customer-card h3 { font-size: 18px; margin-bottom: 12px; }
.customer-card p { margin: 4px 0; color: var(--text-secondary); font-size: 14px; }
.customer-card-actions { margin-top: 16px; display: flex; gap: 12px; flex-wrap: wrap; }

/* Action Buttons - Consistent with other pages */
.action-btn {
    padding: 10px 20px;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
}

.edit-btn {
    background: var(--accent);
    color: #000;
}

.edit-btn:hover {
    background: #fde047;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(250, 204, 21, 0.4);
}

.delete-btn {
    background: var(--error);
    color: #fff;
}

.delete-btn:hover {
    background: #dc2626;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
}

/* CTA Buttons */
.cta {
    background: var(--primary);
    color: #fff;
    padding: 14px 28px;
    border-radius: 12px;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
}

.cta:hover {
    background: #3b82f6;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
}

.add-from-peppol {
    background: var(--accent);
    color: #000;
    margin-top: 12px;
}

.add-from-peppol:hover {
    background: #fde047;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(250, 204, 21, 0.4);
}

.form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-top:20px; }
.form-group { display: flex; flex-direction: column; }
label { margin-bottom: 8px; font-weight: 500; color: var(--text-secondary); font-size: 14px; }
input, select { padding: 14px; border-radius: 12px; border: 1px solid var(--border); background: rgba(255, 255, 255, 0.08); color: var(--white); font-size: 16px; }
input:focus, select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2); }

.validation-message {
    margin-top: 8px;
    font-size: 14px;
    min-height: 24px;
}

.endpoint-validation {
    margin-top: 8px;
    font-size: 14px;
    min-height: 24px;
}

/* Searchable Country Dropdown Styles */
#country-search-container {
    position: relative;
}

#country-search-input {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: rgba(255, 255, 255, 0.08);
    color: var(--white);
    font-size: 16px;
}

#country-search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
}

#country-list {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    max-height: 300px;
    overflow-y: auto;
    background: var(--bg-darker);
    border: 1px solid var(--border);
    border-top: none;
    border-radius: 0 0 12px 12px;
    z-index: 10;
    display: none;
}

.country-option {
    padding: 12px 14px;
    cursor: pointer;
    color: var(--white);
}

.country-option:hover {
    background: rgba(255, 255, 255, 0.1);
}

.country-option.selected {
    background: var(--primary);
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    header { padding: 20px; }
    .desktop-nav { display: none; }
    .hamburger { display: flex; }
    .desktop-table-wrapper { display: none; }
    .mobile-customer-list { display: flex; }
    .main { padding: 20px; }
    .card { padding: 20px; }
    .peppol-search input { width: 100%; margin-bottom: 12px; }
    .peppol-search button { width: 100%; }
    .customer-card-actions { flex-direction: column; }
    .action-btn { width: 100%; text-align: center; }
}
</style>
</head>
<body>
<header>
    <div class="header-left">
        <h1>Supplier Management</h1>
    </div>

    <!-- Desktop Navigation -->
    <nav class="desktop-nav">
        <a href="dashboard.html" class="back-btn">‚Üê Back to Dashboard</a>
        <button id="logout-btn" class="logout-btn">Logout</button>
        <label class="theme-toggle">
            <input type="checkbox" id="theme-toggle-desktop">
            <span class="slider"></span>
        </label>
    </nav>

    <!-- Hamburger Icon (Mobile Only) -->
    <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-nav" id="mobile-nav">
        <button class="mobile-nav-close" id="mobile-nav-close">√ó</button>
        <a href="dashboard.html" class="back-btn">‚Üê Back to Dashboard</a>
        <button id="mobile-logout-btn">Logout</button>
        <label class="theme-toggle">
            <input type="checkbox" id="theme-toggle-mobile">
            <span class="slider"></span>
        </label>
    </div>
</header>

<div class="main">
    <div class="card">
        <h2>Suppliers</h2>
        <div class="peppol-search">
            <label>Search in PEPPOL Directory</label><br>
            <input id="peppol-search-input" placeholder="Company name, VAT ID, or country">
            <button id="peppol-search-btn" class="cta">Lookup</button>
        </div>
        <div id="peppol-results" class="peppol-results" style="display:none;">
            <button id="peppol-close-btn">√ó</button>
        </div>
        <button id="add-supplier-btn" class="cta">Add Supplier Manually</button>

        <div class="desktop-table-wrapper">
            <table id="suppliers-table" class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>VAT ID</th>
                        <th>Country</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <div id="mobile-supplier-list" class="mobile-customer-list"></div>
    </div>

    <div class="card" id="supplier-form-card" style="display: none;">
        <h2 id="supplier-form-title">Add Supplier</h2>
        <form id="supplier-form" autocomplete="off">
            <div class="form-grid">
                <div class="form-group">
                    <label>Name *</label>
                    <input id="sup-name" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label>Endpoint ID *</label>
                    <input id="sup-endpoint" required placeholder="e.g. 9955:se556608145001" autocomplete="off">
                    <div id="endpoint-validation" class="endpoint-validation"></div>
                </div>
                <div class="form-group">
                    <label>VAT ID *</label>
                    <input id="sup-vat" required placeholder="e.g. SE556471447401" autocomplete="off">
                    <div id="vat-validation" class="validation-message"></div>
                </div>
                <div class="form-group">
                    <label>Registration Name *</label>
                    <input id="sup-reg-name" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label>Street *</label>
                    <input id="sup-street" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label>Additional Street</label>
                    <input id="sup-add-street" autocomplete="off">
                </div>
                <div class="form-group">
                    <label>City *</label>
                    <input id="sup-city" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label>Postal Code *</label>
                    <input id="sup-postal" required autocomplete="off">
                </div>
                <div class="form-group">
                    <label>Country *</label>
                    <div id="country-search-container">
                        <input type="text" id="country-search-input" placeholder="Search country..." autocomplete="off">
                        <div id="country-list"></div>
                    </div>
                    <input type="hidden" id="sup-country" required>
                </div>
                <div class="form-group">
                    <label>Company ID</label>
                    <input id="sup-company-id" placeholder="e.g. 5564714474" autocomplete="off">
                    <div id="company-validation" class="validation-message"></div>
                </div>
                <div class="form-group">
                    <label>Contact Name</label>
                    <input id="sup-contact-name" autocomplete="off">
                </div>
                <div class="form-group">
                    <label>Contact Phone</label>
                    <input id="sup-contact-phone" autocomplete="off">
                </div>
                <div class="form-group">
                    <label>Contact Email</label>
                    <input id="sup-contact-email" type="email" autocomplete="off">
                </div>
            </div>
            <div style="margin-top:32px; display:flex; gap:16px; flex-wrap:wrap;">
                <button type="submit" class="cta">Save Supplier</button>
                <button type="button" id="cancel-supplier-btn" class="cta">Cancel</button>
            </div>
        </form>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabaseUrl = 'https://qxpaplabjocxaftqocgu.supabase.co';
const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF4cGFwbGFiam9jeGFmdHFvY2d1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2NTcyOTQsImV4cCI6MjA4MTIzMzI5NH0.VpoV9d2XGkRTv5UoZFKiA23IOOV2zasV18pW_9JmCj4";
const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey);

let currentSupplierId = null;
let userId = null;

// Country list (same as customers.html)
const countries = [
    { code: "AT", name: "Austria" },
    { code: "BE", name: "Belgium" },
    { code: "BG", name: "Bulgaria" },
    { code: "CY", name: "Cyprus" },
    { code: "CZ", name: "Czech Republic" },
    { code: "DE", name: "Germany" },
    { code: "DK", name: "Denmark" },
    { code: "EE", name: "Estonia" },
    { code: "EL", name: "Greece" },
    { code: "ES", name: "Spain" },
    { code: "FI", name: "Finland" },
    { code: "FR", name: "France" },
    { code: "GB", name: "United Kingdom" },
    { code: "HR", name: "Croatia" },
    { code: "HU", name: "Hungary" },
    { code: "IE", name: "Ireland" },
    { code: "IT", name: "Italy" },
    { code: "LT", name: "Lithuania" },
    { code: "LU", name: "Luxembourg" },
    { code: "LV", name: "Latvia" },
    { code: "MT", name: "Malta" },
    { code: "NL", name: "Netherlands" },
    { code: "PL", name: "Poland" },
    { code: "PT", name: "Portugal" },
    { code: "RO", name: "Romania" },
    { code: "SE", name: "Sweden" },
    { code: "SI", name: "Slovenia" },
    { code: "SK", name: "Slovakia" }
];

// VAT patterns, company patterns, validation functions (same as customers.html)
const vatPatterns = {
    AT: /^U\d{8}$/,
    BE: /^(0\d{9}|\d{10})$/,
    BG: /^\d{9,10}$/,
    CY: /^\d{8}[A-Z]$/,
    CZ: /^\d{8,10}$/,
    DE: /^\d{9}$/,
    DK: /^\d{8}$/,
    EE: /^\d{9}$/,
    EL: /^\d{9}$/,
    ES: /^[A-Z0-9]\d{7}[A-Z0-9]$/,
    FI: /^\d{8}$/,
    FR: /^[A-Z0-9]{2}\d{9}$/,
    HR: /^\d{11}$/,
    HU: /^\d{8}$/,
    IE: /^\d{7}[A-Z]{1,2}$|^\d[A-Z]\d{5}[A-Z]$/,
    IT: /^\d{11}$/,
    LT: /^(\d{9}|\d{12})$/,
    LU: /^\d{8}$/,
    LV: /^\d{11}$/,
    MT: /^\d{8}$/,
    NL: /^\d{9}B\d{2}$/,
    PL: /^\d{10}$/,
    PT: /^\d{9}$/,
    RO: /^\d{2,10}$/,
    SE: /^\d{10}01$/,
    SI: /^\d{8}$/,
    SK: /^\d{10}$/,
    GB: /^\d{9}(\d{3})?$/
};

const companyPatterns = {
    DE: /^(HRB|HRA)\d+$/i,
    NL: /^\d{8}$/,
    FR: /^\d{9}\d{5}$/,
    IT: /^\d{11}$/,
    ES: /^[A-Z]?\d{8}[A-Z0-9]?$/i,
    SE: /^\d{10}$/
};

function cleanInput(value) {
    return value.trim().toUpperCase().replace(/[\s\.\-]/g, '');
}

function validateVAT(country, vat) {
    if (!vat || !country) return null;
    let cleaned = cleanInput(vat);
    if (cleaned.startsWith(country)) {
        cleaned = cleaned.slice(country.length);
    }
    const pattern = vatPatterns[country.toUpperCase()];
    if (!pattern) return false;
    return pattern.test(cleaned);
}

function validateCompanyID(country, companyId) {
    if (!companyId || !country) return null;
    const cleaned = cleanInput(companyId);
    const pattern = companyPatterns[country.toUpperCase()];
    if (!pattern) return true;
    return pattern.test(cleaned);
}

function validateEndpoint(endpoint) {
    if (!endpoint) return null;
    const trimmed = endpoint.trim();
    const regex = /^\d{4}:[A-Z0-9]+$/i;
    return regex.test(trimmed);
}

function updateValidation() {
    const country = document.getElementById('sup-country').value.toUpperCase();
    const vat = document.getElementById('sup-vat').value;
    const companyId = document.getElementById('sup-company-id').value;
    const endpoint = document.getElementById('sup-endpoint').value;

    const vatMsg = document.getElementById('vat-validation');
    const companyMsg = document.getElementById('company-validation');
    const endpointMsg = document.getElementById('endpoint-validation');

    const vatValid = validateVAT(country, vat);
    if (vatValid === null) {
        vatMsg.textContent = '';
    } else if (vatValid) {
        vatMsg.textContent = 'Valid VAT format';
        vatMsg.style.color = 'var(--success)';
    } else {
        vatMsg.textContent = 'Invalid VAT format for ' + country;
        vatMsg.style.color = 'var(--error)';
    }

    const companyValid = validateCompanyID(country, companyId);
    if (companyValid === null) {
        companyMsg.textContent = '';
    } else if (companyValid) {
        companyMsg.textContent = 'Valid format';
        companyMsg.style.color = 'var(--success)';
    } else {
        companyMsg.textContent = 'Invalid Company ID format for ' + country + ' (no hyphens/spaces allowed)';
        companyMsg.style.color = 'var(--error)';
    }

    const endpointValid = validateEndpoint(endpoint);
    if (endpointValid === null) {
        endpointMsg.textContent = '';
    } else if (endpointValid) {
        endpointMsg.textContent = 'Valid PEPPOL endpoint format';
        endpointMsg.style.color = 'var(--success)';
    } else {
        endpointMsg.textContent = 'Invalid endpoint format (must be 0000:endpoint)';
        endpointMsg.style.color = 'var(--error)';
    }
}

// Sync Registration Name with Name in real time for new suppliers
function syncRegistrationName() {
    const nameInput = document.getElementById('sup-name');
    const regNameInput = document.getElementById('sup-reg-name');
    if (!currentSupplierId) {
        regNameInput.value = nameInput.value;
    }
}

// Swedish 0007 logic for suppliers
function applySwedishLogic(endpoint) {
    const trimmed = endpoint.trim();
    if (trimmed.startsWith('0007:')) {
        const orgNumber = trimmed.slice(5);
        document.getElementById('sup-company-id').value = orgNumber;
        document.getElementById('sup-vat').value = 'SE' + orgNumber + '01';
        document.getElementById('sup-country').value = 'SE';
        document.getElementById('country-search-input').value = 'Sweden (SE)';
        syncRegistrationName();
        updateValidation();
    }
}

// Searchable country dropdown (same as customers.html)
function initCountryDropdown() {
    const searchInput = document.getElementById('country-search-input');
    const countryList = document.getElementById('country-list');
    const hiddenCountry = document.getElementById('sup-country');

    countries.forEach(country => {
        const div = document.createElement('div');
        div.className = 'country-option';
        div.textContent = `${country.name} (${country.code})`;
        div.dataset.code = country.code;
        div.addEventListener('click', () => {
            searchInput.value = `${country.name} (${country.code})`;
            hiddenCountry.value = country.code;
            countryList.style.display = 'none';
            updateValidation();
        });
        countryList.appendChild(div);
    });

    searchInput.addEventListener('focus', () => {
        countryList.style.display = 'block';
        filterCountries('');
    });

    searchInput.addEventListener('input', () => {
        filterCountries(searchInput.value.toLowerCase());
    });

    searchInput.addEventListener('blur', () => {
        setTimeout(() => countryList.style.display = 'none', 200);
    });

    function filterCountries(query) {
        const options = countryList.querySelectorAll('.country-option');
        options.forEach(option => {
            const text = option.textContent.toLowerCase();
            option.style.display = text.includes(query) ? 'block' : 'none';
        });
    }
}

// Theme, clearForm, etc. (same as customers.html, adapted for sup- prefixes)

function clearForm() {
    const form = document.getElementById('supplier-form');
    form.reset();
    form.querySelectorAll('input').forEach(input => {
        input.value = '';
    });
    document.getElementById('country-search-input').value = '';
    document.getElementById('supplier-form-title').textContent = 'Add Supplier';
    updateValidation();
}

// All other functions (loadSuppliers, render tables, edit, delete, save) adapted from customers.html with "sup" prefixes and table "suppliers"

// ... (full adapted script for suppliers.html)

</script>
</body>
</html>
